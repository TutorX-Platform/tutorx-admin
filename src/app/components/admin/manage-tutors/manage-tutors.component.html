<div class="manage-tutors">
  <div class="page-title-container" fxLayout="row" fxLayoutAlign="space-between center">
    <div class="page-title">Tutors Management</div>
    <button mat-button class="add-tutor-button" (click)="onAddTutor()">Add New Tutor</button>
  </div>
  <div class="divider"></div>

  <div class="main-container" fxLayout="row">
    <div class="request-container" fxLayout="column" fxLayoutGap="24px">
      <div *ngFor="let tutor of tutors">
        <div fxLayout="row" class="request-card" fxLayoutAlign="space-between center" (click)="onCardClick(tutor.userId)">
          <div fxLayout="row">
            <div fxLayout="column" fxLayoutAlign="start start">
              <img *ngIf="tutor.profileImage" [src]="tutor.profileImage" alt="Avatar" class="avatar">
              <img *ngIf="!tutor.profileImage" src="../../../../assets/images/profile.jpg" alt="Avatar" class="avatar">
            </div>
            <div class="info" fxLayout="column" fxLayoutAlign="start start">
              <div class="title">{{tutor.firstName}}</div>
              <div fxLayout="row wrap" fxLayoutAlign="start center" class="sub-title" fxLayoutGap="16px grid">
                <div class="rating" fxLayout="row">
                  <mat-icon [ngClass]="tutor.rating >= 1 ? 'star star--selected' : 'star'">star</mat-icon>
                  <mat-icon [ngClass]="tutor.rating >= 2 ? 'star star--selected' : 'star'">star</mat-icon>
                  <mat-icon [ngClass]="tutor.rating >= 3 ? 'star star--selected' : 'star'">star</mat-icon>
                  <mat-icon [ngClass]="tutor.rating >= 4 ? 'star star--selected' : 'star'">star</mat-icon>
                  <mat-icon [ngClass]="tutor.rating >= 5 ? 'star star--selected' : 'star'">star</mat-icon>
                </div>
                <div class="university" fxLayout="row wrap" fxLayoutAlign="start center" fxLayoutGap="8px grid">
                  <div>{{tutor.tasksCompleted}} Tasks Completions</div>
                  <div>
                    <mat-icon class="dot">
                      fiber_manual_record
                    </mat-icon>
                  </div>
                  <div>{{tutor.description}}</div>
                </div>
              </div>
              <div fxLayout="row" fxLayoutAlign="start center" fxLayoutGap="8px" style="margin-top: 24px;"
                   fxLayout.lt-md="column" fxLayoutAlign.lt-md="center start" fxLayoutGap.lt-md="8px">
                <div class="c-chip c-chip--subjects invert-false">{{tutor.subjects}}</div>
                <div *ngFor="let subCategory of tutor.subCategory" class="c-chip c-chip--subjects invert-false">
                  {{subCategory}}</div>
              </div>
            </div>
          </div>
          <div class="refund">
            <div class="title">Paid Amount</div>
            <div class="amount"><span style="color: #57499B;"></span> {{tutor.totalEarnings}} USD</div>
          </div>
        </div>

      </div>
    </div>
    <div class="filter-container" fxLayout="column">
      <div fxLayout="row" class="filter-title">Filters</div>
      <mat-form-field appearance="outline" class="my-form-field">
          <span matPrefix>
            <mat-icon>search</mat-icon> &nbsp;&nbsp;
          </span>
        <input matInput type="search" [formControl]="searchControl">
      </mat-form-field>
      <div fxLayout="row" fxLayoutAlign="start center" class="label">Sort by</div>
      <mat-form-field appearance="outline" class="my-form-field">
        <mat-select [(ngModel)]="selectedValue" placeholder="Select">
          <mat-option *ngFor="let state of states" [value]="state">
            {{state}}
          </mat-option>
        </mat-select>
      </mat-form-field>
      <div fxLayout="row" fxLayoutAlign="start center" class="label">Tutor</div>
      <mat-form-field appearance="outline" class="my-form-field">
        <mat-chip-list #chipList aria-label="Fruit selection">
          <mat-chip
            *ngFor="let fruit of selectedTutors"
            [selectable]="selectable"
            [removable]="removable"
            (removed)="remove(fruit)">
            {{fruit}}
            <mat-icon matChipRemove *ngIf="removable">cancel</mat-icon>
          </mat-chip>
          <input
            placeholder="Type name"
            #fruitInput
            [formControl]="tutorCtrl"
            [matAutocomplete]="auto"
            [matChipInputFor]="chipList"
            [matChipInputSeparatorKeyCodes]="separatorKeysCodes"
            (matChipInputTokenEnd)="add($event)">
        </mat-chip-list>
        <mat-autocomplete #auto="matAutocomplete" (optionSelected)="selected($event)">
          <mat-option *ngFor="let fruit of filteredTutors | async" [value]="fruit">
            {{fruit}}
          </mat-option>
        </mat-autocomplete>
      </mat-form-field>
    </div>
  </div>

</div>
